
字符串转Int，疏忽了，没考虑数字非常大(大到long long都存不了)，面试官提醒完成；(15min)
```
class Solution {
public:
    int strToInt(string str) {
        int i = 0, flag = 1;
        long res = 0; //默认flag = 1，正数
        while (str[i] == ' ') i ++;
        if (str[i] == '-') flag = -1;
        if (str[i] == '-' || str[i] == '+') i ++;
        for (; i < str.size() && isdigit(str[i]); i ++)  {
            res = res * 10 + (str[i] - '0');
            if (res >= INT_MAX && flag == 1) return  INT_MAX;
            if (res > INT_MAX && flag == -1) return  INT_MIN;
        } 
        return flag * res;
    }
};

```
判断平衡二叉树；(15min)
```
int getDepth(TreeNode* root, bool& flag){
    if(root){
        int leftDepth = getDepth(root->left, flag);
        int rightDepth = getDepth(root->right, flag);
        if(fabs(leftDepth - rightDepth) > 1){
            flag = false;
        }
        return (leftDepth > rightDepth ? leftDepth : rightDepth) + 1;
    }
    return 0;
}

bool IsBalanced_Solution(TreeNode* root) {
    bool flag = true;
    getDepth(root, flag);
    if(flag){
        return true;
    }
    else{
        return false;
    }
}
```

 redis五种数据类型 + 底层实现 + 跳表解释
```

```

cookie session
mysql 聚簇索引和非聚簇索引
观察者模式(直言不熟设计模式)
http状态码介绍
Linux 5种IO模型，详细介绍多路复用IO和信号驱动式IO
细说多态
虚表。先开始说的很简略，面试官又举了个例子，详细问细节，没答上来
stl标准库：vector、list、rb_tree
map底层实现，和unordered_map的区别

1.    C++的多态如何体现？
A:    静态多态：操作符重载，函数重载，函数模板；动态多态：虚函数机制；
2.    构造函数可以是虚函数吗？析构函数呢？
A:    不可以，调用构造函数时，对象还未创建；可以，虚析构函数机制可以避免内存泄漏。
3.    一个类中声明了一个虚函数，取他的sizeof()应该是多少？
A: 类中添加虚函数后，sizeof()为该指针(虚函数表)的大小。
4.    线程池和内存池了解吗？
A：多并发， 解决内存碎片， 分别详细说
5.  epoll与select， poll的区别
A：老问题了，详细说一遍
6.    DLL的加载方式有哪些？
A:    动态加载和静态加载。
7.    常用排序方法里哪些平均复杂度？
A:    比如快排， 堆排， 归并排序， O(nlogn),
8. 讲一下堆排的工作原理
9.   讲一下 STL相关容器的构造，vector，list，map的红黑树
10. 讲一下BFS与DFS
还有一些问题记不清了。。。。
11.  TCP/IP四层模型
12.    TCP  与 UDP区别
13.    TCP拥塞控制

一面：
•先简单做一下自我介绍：
•根据项目，进行比较详细的询问
•简单说一下new 跟 malloc的差别
•简单说一下TCP的三次握手，并说说三次握手做了什么事情，每次通讯包发了什么
•TCP与UDP的差异，优缺点。
•写一下strstr的实现函数
•epoll，select实现的功能，聊一聊多路复用的理解；
•一个函数在堆栈中是如何放置的，static变量，全局变量是放置在哪里？

1、算法题：
•提供总数为100万个数，可能会分10次提供，即每次提供10万个，然后你如何在每次的能刷选出TOP10个最大的数据
•实现一个链表可以随意插入的函数，并计算插入的时间复杂度
•双向链表与单向连接插入的时间复杂度怎么表示
•你了解的排序算法有哪些？

2、数据结构：
•是否连接红黑树
•是否了解数据结构的“堆”

3、调试工具
•如果要检测一个程序内存泄漏，需要怎么做？
•gdb中的backtrace是什么意思
•如何用GDB进行内存泄漏调试？

二面：
•说一下你做过项目中，你认为比较出现的点是什么：
•写一个函数：假如str1=“12345678”，str2=“246”，那么str2可以是str1的顺序子串：


1.简单实现strstr（双重循环，不用KMP）
2.在map中做删除value（注意iterator失效问题）
3.单向链表的反转（双指针）
现场面二面：
自我介绍，聊项目（主要想问分布式相关的经验，但是没有这方面经验。。。）
撮合是单进程的么？ 挂了怎么办？（备机。。。）
如果服务端挂了，使得连接断了，怎么恢复从而客户无感知？（不知道。。。）
数据库如果挂了怎么办（备机。。。）
安全编程：知道缓冲区溢出漏洞吗？
问：给定一个n，给出0~n过程中2出现的次数// 比如13，则0/1/2/3..../12 一共出现了两个2，所以结果是2；
答：假设一共有n位，每一位的数字分别为num_n;则num_n上出现2的次数为f(n)。。。。。
问：给出前序遍历和中序遍历，输出后序遍历；
用后序遍历：（用中序遍历确定前序遍历的左子树和右子树范围）
map in_map; 存储中序遍历每个字符的下标便于后面查找
问：由3、5、7的乘积组成的数，求第k个大的值； 3/5/7/9(33)/15(35)
将3、5、7存入set，循环k，每次从set中取出一位，然后3、5、*7再存入set；

三次握手四次挥手，time_wait，2MSL
什么情况下需要在构造函数中做特殊处理：
1.会有一些堆分配的内容  
2.const、包含其他类需要构造 //堆分配、const、包含其他类需要调用构造函数的、（const什么时候初始化—）初始化列表）

构造和析构的顺序：父类的构造、包含其他类，其他类的构造；
线程同步、线程的生产者消费者模式实现（A完成了通知B，B完成了C再接着做这种协作模式）：
算法题：两个有序链表合并；单链表查找倒数第k个节点；（时间复杂度是多少）
多线程：实现单链表的插入和get，线程安全（不仅是atomic，还有atomic_flag、）；
auto和decltype的区别；
多态情况下，父类指针指向子类对象，怎么用这个父类指针调用到父类的对应虚函数？
在main函数之前会执行哪些操作；
lambda表达式[=]中间的等号是什么意思；

、主要考察项目，通过项目提出基础问题；

2、之前有微服务经验，面试官就详细问到微服务的架构、框架的实现、服务治理、分布式一致性等问题；

3、之前有玩过日志监控系统，首先还是考察架构，ELK的相关知识，重点描述Elasticsearch的一些架构原理，比如倒排索引的原理；

4、问消息队列的相关知识，接触过Kafka，问了Kafka中消息可以被多个消费者消费吗？；以及选举机制和HW机制；

5、开放性问题，讲一个之前遇到的问题，并如何解决的。这个描述生产过程中运行的问题，并描述排查问题；

6、数据库和Redis相关问题，数据库考察索引的原理以及几种事务的区别。Redis问数据结构，延时队列如何实现，分布式锁原理；


问题；

6、数据库和Redis相关问题，数据库考察索引的原理以及几种事务的区别。Redis问数据结构，延时队列如何实现，分布式锁原理；


二、三面：

1、聊解题思路和项目，根据项目经验问相关的问题，要求广度，尤其考察架构广度，会将目前的项目量级扩大几十倍，重新设计架构，同时涉及到一些压力面试。
2、具体岗位的技术栈语言的基础知识；
3、负载均衡算法；
4、ngnix如何做限流；
5、四层LVS和七层Ngnix的区别；
6、微服务架构的设计思路；
四、五面：
1、考察系统设计和架构设计；
2、问了秒杀系统的如何设计，分接入层、接口层、消息队列层、逻辑层四个方面讲解，接入层可以做服务治理相关事情，接口层做抢购开关、黑白名单、随机拒绝等处理，逻辑层具体抢购逻辑实现，涉及到redis分布式锁以及DB和Redis的一致性问题。
3、从秒杀系统还引申出分布式事务的几种实现，二段式、三段式、补偿型(TCC)、基于可靠消息服务的消息队列实现。重点讨论了这几种的实现和区别，要求画出基于可靠消息服务的消息队列实现分布式事务的架构图，以及上游服务和下游服务如何保证消息可靠性和一致性。
4、考察微服务架构，服务拆分的原则、RPC框架原理、配置管理(etcd)的一致性协议raft选举原理。
5、考察服务治理，服务限流算法，服务降级的指标和恢复指标，服务熔断。
6、开放性问题：遇到印象最深的问题，以及如何解决的。

C++面向对象的三种特性？（每条详细说说）
C++继承和组合？你在实际项目中是怎么使用的？什么情况下使用继承？什么情况下使用组合？
C++构造函数可以是虚函数吗？为什么？
C++析构函数可以是虚函数吗？为什么要将析构函数设置为虚函数？
C++如何实现多态？虚表指针是什么时候被初始化的？实例化一个对象需要那几个阶段？（三个）
C++偏特化？
重载、重写、覆盖？
static关键字的作用？（要全面）怎么实现的？
inline和宏定义的区别？inline是如何实现的？宏定义是如何实现的？
指针和引用的区别？怎么实现的？
malloc和mmap的底层实现？malloc分配的是什么？（底层详细回答）
Linux进程地址空间布局？（这里又问道虚拟内存和分页、页表这些东西）
tcp的握手挥手过程？（详细）tcp为什么要连接？tcp建立连接这里你是怎么理解的？
半连接队列？全连接队列？
tcp流量控制和拥塞控制？
time_wait状态？为什么是2msl？
有很多close_wait怎么解决？
阻塞和非阻塞？同步和异步？
五种IO模型？
select和epoll有什么区别？epoll的LT和ET模式？
udp为什么是不可靠的？bind和connect对于udp的作用是什么？
NAT是什么？底层实现原理？
斐波那契数列的非递归写法？（写出代码）
共享桌面用你熟悉的任意画图工具画项目架构图？（我用的ProcessOn）
聊项目？
总共用时两个小时吧，问了很多，有些已经想不起来了。
？然后又扯到位域
map如何遍历删除所有元素？迭代器失效？
map和unordered_map的底层实现
一个unique_ptr怎么赋值给另一个unique_ptr对象？（std::move）
一个进程能不能绑定到一个cpu？系统调用接口是什么？线程呢？
对于使用tcp通信的两端，如果client已经退出，此时服务端继续send会出现什么问题？这个当然就要扯到SIGPIPE信号了？
map的底层实现？zset的底层实现？为什么zset不使用红黑树作为其底层实现？为什么map不使用跳表作为其底层实现？
写道题吧：非递归求二叉树的高度？（需要写测试用例）

